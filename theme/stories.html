<!DOCTYPE html>
<html data-wf-page="691f77f8e4704f3957868d4e" data-wf-site="691b528b32c64580050add6b" lang="en"><head><link rel="preconnect" crossorigin="true" href="https://assets.website-files.com">{%- seo seo -%}
  <meta charset="utf-8">
  
  
  
  <meta content="width=device-width, initial-scale=1" name="viewport">
  
  <link href="/assets/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/menu-a3c17a.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="{{ settings.site.favicon | default: "/assets/images/favicon.ico" }}" rel="shortcut icon" type="image/x-icon">
  <link href="{{ settings.site.apple_touch_icon | default: "/assets/images/webclip.png" }}" rel="apple-touch-icon"><!--  Update the domain and clientId content with your Auth0 credentials  -->
  <meta name="domain" content="dev-daec-qpn.us.auth0.com">
  <meta name="clientId" content="anXkCZDA9aEPTbM3qf3tTtec6GnqFkbw">
  <meta name="loginPath" content="/locked-content">
  <style>
  .auth-visible, .auth-invisible {
  	visibility: hidden;
  }
  .auth---visible, .auth---invisible {
  	visibility: hidden;   
  }
  .hidden {
  	display: none !important; 
  }
</style>
  <style>
.uploadcare--widget__button_type_open {
  background-color: #000000;
  color: #ffffff;
  border-radius: none;
}
.uploadcare--widget__button_type_open:hover {
  background-color: #ffffff;
  color: #000000;
  border-radius: none;
}
.uploadcare--tab__content {
    -ms-flex-negative: 1;
    flex-shrink: 1;
    -ms-flex-align: center;
    align-items: center;
    overflow-y: auto;
    padding: 0 20px;
    cursor: pointer;
}
.uploadcare--widget__button_type_open {
    background: #000000;
    border-radius: 0;
    color: #fff;
}
</style>
  <!-- Tiptap Rich Text Editor - Using ES Modules -->
  <script type="importmap">
  {
    "imports": {
      "@tiptap/core": "https://esm.sh/@tiptap/core@2.1.13",
      "@tiptap/starter-kit": "https://esm.sh/@tiptap/starter-kit@2.1.13",
      "@tiptap/extension-image": "https://esm.sh/@tiptap/extension-image@2.1.13",
      "@tiptap/pm": "https://esm.sh/@tiptap/pm@2.1.13"
    }
  }
  </script>

  <!-- Custom Tiptap Editor Styles -->
  <style>
.tiptap-editor {
    box-sizing: border-box;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    min-height: 300px;
}

.tiptap-editor .ProseMirror {
    padding: 12px 15px;
    outline: none;
    min-height: 300px;
    color: #000000;
    font-size: 16px;
    line-height: 1.6;
}

.tiptap-editor .ProseMirror p {
    margin: 0 0 1em 0;
    color: #000000;
}

.tiptap-editor .ProseMirror h1,
.tiptap-editor .ProseMirror h2,
.tiptap-editor .ProseMirror h3 {
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    color: #000000;
    font-weight: bold;
}

.tiptap-editor .ProseMirror ul,
.tiptap-editor .ProseMirror ol {
    padding-left: 1.5em;
}

.tiptap-editor .ProseMirror blockquote {
    border-left: 3px solid #ddd;
    padding-left: 1em;
    margin-left: 0;
    font-style: italic;
}

.tiptap-editor .ProseMirror code {
    background-color: #f4f4f4;
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-family: monospace;
}

.tiptap-editor .ProseMirror pre {
    background-color: #f4f4f4;
    padding: 1em;
    border-radius: 4px;
    overflow-x: auto;
}

.tiptap-toolbar {
    border-bottom: 1px solid #ddd;
    padding: 8px;
    background: #f8f8f8;
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.tiptap-toolbar button {
    background: white;
    border: 1px solid #ddd;
    padding: 6px 12px;
    cursor: pointer;
    border-radius: 3px;
    font-size: 14px;
    font-weight: 600;
    color: #000000;
    transition: all 0.2s;
}

.tiptap-toolbar button:hover {
    background: #e8e8e8;
}

.tiptap-toolbar button.is-active {
    background: #000;
    color: #fff;
    border-color: #000;
}

.tiptap-editor .ProseMirror img,
.tiptap-editor .ProseMirror .editor-image {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    margin: 10px 0;
    display: block;
}

.tiptap-editor .ProseMirror img:hover {
    cursor: pointer;
    opacity: 0.9;
}
</style>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@1/web/uc-file-uploader-regular.min.css">
  <!-- Environment config injected from Eleventy -->
  <script>
    window.ENV_CONFIG = {
      UPLOADCARE_PUBLIC_KEY: '{{ env.UPLOADCARE_PUBLIC_KEY }}',
      XANO_API_BASE_URL: '{{ env.XANO_API_BASE_URL }}'
    };
  </script>
  <script type="module">
  import * as UC from 'https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@1/web/uc-file-uploader-regular.min.js';
  UC.defineComponents(UC);
</script>
  <script src="https://cdn.prod.website-files.com/691b528b32c64580050add6b%2F685146e1d8a68f749232b664%2F691f77e3d2952ec51dcfbb07%2Fimportucanddefinelocales-1.1.1.js" type="text/javascript"></script>
  <script src="https://cdn.prod.website-files.com/691b528b32c64580050add6b%2F685146e1d8a68f749232b664%2F6930ff7330ea832f641dab91%2Fcssimporter-0.1.0.js" type="text/javascript"></script>
{{ settings.site.header_additional_content }}{%- include "partials/_site-css-variables" -%}<style>.w-video.w-embed {
            aspect-ratio: 16 / 9;
        }</style></head>
<body class="body-3">
  <div class="pageswrap">
    <header class="page-header">
      <div data-animation="default" class="nav-2 w-nav" data-easing2="ease-out-cubic" data-easing="ease-out-cubic" data-collapse="medium" data-w-id="aee2cf24-1cc3-40e1-20dd-a49b8f93bd70" role="banner" data-duration="600">
        <div style="background-color:rgba(255,255,255,0.5)" class="nav---container">
          <a href="{{ links.2f }}" class="brand-2 w-nav-brand"><img width="400" height="48" alt="{{ images.-3042e10c.alt | escape }}" src="{{ images.-3042e10c.url }}" loading="lazy" class="nav---logo"></a>
          <nav role="navigation" class="nav-menu-2 w-nav-menu">
            <div class="nav---menu-inner">
              <a href="{{ links.23 }}" class="nav---link w-nav-link">{{ texts.7a20d721 }}</a>
              <a href="{{ links.23 }}" class="nav---link w-nav-link">{{ texts.7c7773de }}</a>
              <div class="nav---button">
                <div class="btn---wrap">
                  <div css-pointer-events="none" class="btn---bg-wrap">
                    <div class="btn---bg-circle-wrap">
                      <div class="btn---bg-circle"></div>
                    </div>
                  </div>
                  <a data-w-id="aee2cf24-1cc3-40e1-20dd-a49b8f93bd88" href="{{ links.23 }}" target="_blank" class="btn w-button">{{ texts.7a59368f }}</a>
                </div>
              </div>
            </div>
          </nav>
          <div class="menu-button-2 w-nav-button">
            <div class="nav---button-inner">
              <div class="nav---button-line x-top"></div>
              <div style="width:2.5rem" class="nav---button-line"></div>
              <div class="nav---button-line x-bottom"></div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="page-main">
      <section class="section x-hero">
        <div class="_00login">
          <div>
            <h1 class="tradeheading">{{ texts.-2923d15d }}</h1>
          </div>
          <div class="abcheroform">
            <div class="w-layout-grid abcform-grid">
              <div id="w-node-aee2cf24-1cc3-40e1-20dd-a49b8f93bd97-57868d4e" class="form-block-custom w-form">
                <form id="wf-form-trade" name="wf-form-abcTrade" data-name="abctrade" action="https://xerb-qpd6-hd8t.n7.xano.io/api:9lz93PXx/trade" method="post" class="form-custom" data-wf-page-id="691f77f8e4704f3957868d4e" data-wf-element-id="aee2cf24-1cc3-40e1-20dd-a49b8f93bd98" data-ajax="true">
                  <div class="formdiv"><label for="First" class="abclabel">{{ texts.119ca21b }}</label><input class="tradename w-input" maxlength="256" name="First" data-name="First" placeholder=" " type="text" id="First"></div>
                  <div class="formdiv"><label for="Last" class="abclabel">{{ texts.1c6105d5 }}</label><input class="tradename w-node-aee2cf24-1cc3-40e1-20dd-a49b8f93bda0-57868d4e w-input" maxlength="256" name="Last" data-name="Last" placeholder=" " type="text" id="Last" required=""></div>
                  <div class="formdiv"><label for="Firm" class="abclabel">{{ texts.4889ba9b }}</label><input class="tradename w-node-aee2cf24-1cc3-40e1-20dd-a49b8f93bda4-57868d4e w-input" maxlength="256" name="Firm" data-name="Firm" placeholder=" " type="text" id="Firm" required=""></div>
                  <div class="formdiv"><label for="Email" class="abclabel">{{ texts.3f0537c }}</label><input class="tradename w-input" maxlength="256" name="Email" data-name="Email" placeholder=" " type="email" id="Email" required=""></div><input type="submit" data-wait="Please wait..." class="button-abcgrid reverse w-button" value="Get Started">
                </form>
                <div class="successmessage w-form-done">
                  <div>{{ texts.5a0ea5a1 }}</div>
                </div>
                <div id="Error" class="error-message-abctrade w-form-fail">
                  <div>{{ texts.-7c112e99 }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="section bg-neutral-lightest">
        <div></div>
        <section class="section bg-neutral-lightest">
          <div id="wr-form-project" class="_00clientform">
            <h1 class="projectstart">{{ texts.64a5be14 }}</h1>
            <div class="_00formwrap">
              <div id="story" class="w-form">
                <form id="wf-form-story" name="wf-form-story" data-name="story" action="https://xerb-qpd6-hd8t.n7.xano.io/api:pIN2vLYu/stories" method="post" data-wf-page-id="691f77f8e4704f3957868d4e" data-wf-element-id="da37ada4-63a7-ad6d-df0b-b5dac7c6235c" data-ajax="true">
                  <div class="w-layout-grid grid-5">
                    <div id="story-name" class="formhalf w-node-da37ada4-63a7-ad6d-df0b-b5dac7c6235e-57868d4e"><label for="story_name" class="field-label">{{ texts.337a8b }}</label><input class="input w-input" maxlength="256" name="story_name" data-name="story_name" placeholder="" type="text" id="story_name" required=""></div>
                    <div id="w-node-da37ada4-63a7-ad6d-df0b-b5dac7c62362-57868d4e" class="formhalf"><label for="story_email" class="field-label">{{ texts.5c24b9c }}</label><input class="input w-input" maxlength="256" name="story_email" data-name="story_email" placeholder="" role="" type="email" id="story_email" required=""></div>
                    <div id="w-node-da37ada4-63a7-ad6d-df0b-b5dac7c62366-57868d4e" class="formhalf"><label for="story_input" id="project-links" class="field-label">{{ texts.5f88ac8 }}</label><input class="input w-input" maxlength="140" name="story_input" data-name="story_input" placeholder="Brief summary of your story (140 chars max)" type="text" id="story_input"></div>
                    <div id="w-node-da37ada4-63a7-ad6d-df0b-b5dac7c6236a-57868d4e" class="formhalf"><label for="story_tags" id="project-links" class="field-label">{{ texts.363419 }}</label><input class="input w-input" maxlength="256" name="story_tags" data-name="story_tags" placeholder="comma separate the tags" type="text" id="story_tags"></div>

                    <!-- Rich Text Editor for Story Content -->
                    <div id="w-node-story-content-editor" style="grid-column: 1 / -1;">
                      <label for="story-content-editor" class="field-label">Story Content</label>
                      <div class="tiptap-editor">
                        <div class="tiptap-toolbar" id="tiptap-toolbar">
                          <!-- Toolbar buttons will be added by JavaScript -->
                        </div>
                        <div id="story-content-editor"></div>
                      </div>
                      <input type="hidden" id="story_content_html" name="story_content_html">
                    </div>

                    <div class="formhalf"><label for="project-links-3" id="project-links" class="field-label">{{ texts.-27b638a5 }}</label><label id="story-checkbox" class="w-checkbox"><input type="checkbox" name="story_checkbox" id="story_checkbox" data-name="story_checkbox" class="w-checkbox-input"><span class="w-form-label" for="story_checkbox">{{ texts.70b87474 }}</span></label></div>
                    <div class="formhalf"><label for="story_hero" class="field-label">Featured Image</label><input class="form-input hidden w-input" maxlength="256" name="story_hero" data-name="story_hero" placeholder="" role="uploadcare-uploader" type="text" id="story_hero"><uploader-story ctx-name="story" class="uploader-story"><uc-config ctx-name="story" pubkey="{{ env.UPLOADCARE_PUBLIC_KEY }}" group-output="true" locale-name="en" files-view-mode="list" data-ucmetadata="{&quot;Alt&quot;:&quot;story&quot;}" img-only="true" source-list="local, url, camera, dropbox, gdrive, facebook" camera-modes="photo" multiple="false" multiple-min="0" multiple-max="1" use-cloud-image-editor="true" text="story_hero" use-cloud-image-editor-tabs="crop, tuning, filters"></uc-config><uc-file-uploader-regular ctx-name="story" class="uc-dark" headless="true" data-uploadcare="true"><uc-form-input ctx-name="story"></uc-form-input></uc-file-uploader-regular><uc-upload-ctx-provider ctx-name="story"></uc-upload-ctx-provider><span ctx-name="story" style="display: block;"> </span><button ctx-name="story" ucuploadbtn="true" type="button" style="padding: 8px 16px; background-color: #000; color: #fff; border: none; cursor: pointer;">Upload Featured Image</button></uploader-story></div>
                    <div class="formhalf"><label for="author_image" class="field-label">Author Image</label><input class="form-input hidden w-input" maxlength="256" name="author_image" data-name="author_image" placeholder="" role="uploadcare-uploader" type="text" id="author_image"><uploader-author ctx-name="author" class="uploader-author"><uc-config ctx-name="author" pubkey="{{ env.UPLOADCARE_PUBLIC_KEY }}" group-output="true" locale-name="en" files-view-mode="list" data-ucmetadata="{&quot;Alt&quot;:&quot;author&quot;}" img-only="true" source-list="local, url, camera, dropbox, gdrive, facebook" camera-modes="photo" multiple="false" multiple-min="0" multiple-max="1" use-cloud-image-editor="true" text="author_image" use-cloud-image-editor-tabs="crop, tuning, filters"></uc-config><uc-file-uploader-regular ctx-name="author" class="uc-dark" headless="true" data-uploadcare="true"><uc-form-input ctx-name="author"></uc-form-input></uc-file-uploader-regular><uc-upload-ctx-provider ctx-name="author"></uc-upload-ctx-provider><span ctx-name="author" style="display: block;"> </span><button ctx-name="author" ucuploadbtn="true" type="button" style="padding: 8px 16px; background-color: #000; color: #fff; border: none; cursor: pointer;">Upload Author Image</button></uploader-author></div>
                    <div class="formhalf"><label for="document_url" class="field-label">Documents for Review</label><input class="form-input hidden w-input" maxlength="256" name="document_url" data-name="document_url" placeholder="" type="text" id="document_url"><uploader-document ctx-name="document" class="uploader-document"><uc-config ctx-name="document" pubkey="{{ env.UPLOADCARE_PUBLIC_KEY }}" group-output="true" locale-name="en" files-view-mode="list" img-only="false" source-list="local, url, dropbox, gdrive" multiple="false" multiple-min="0" multiple-max="1" accept=".pdf,.doc,.docx,.ppt,.pptx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation"></uc-config><uc-file-uploader-regular ctx-name="document" class="uc-dark" headless="true" data-uploadcare="true"><uc-form-input ctx-name="document"></uc-form-input></uc-file-uploader-regular><uc-upload-ctx-provider ctx-name="document"></uc-upload-ctx-provider><span ctx-name="document" style="display: block;"> </span><button ctx-name="document" ucuploadbtn="true" type="button" style="padding: 8px 16px; background-color: #000; color: #fff; border: none; cursor: pointer;">Upload Documents for Review</button><small style="color: #fff; display: block; margin-top: 6px;">Accepted: PDF, Word (.doc, .docx), PowerPoint (.ppt, .pptx)</small></uploader-document></div>
                  </div><input type="submit" data-wait="Please wait..." class="projectbutton w-button" value="publish">
                </form>
                <div class="w-form-done">
                  <div class="text-block">{{ texts.5a0ea5a1 }}</div>
                </div>
                <div class="w-form-fail">
                  <div class="text-block-2">{{ texts.-7c112e99 }}</div>
                </div>
              </div>
            </div>
          </div>
          <div></div>
        </section>
      </section>
    </div>
    <div class="page-footer">
      <div class="footer">
        <div class="grid-6 vertical-5xl">
          <div id="w-node-aee2cf24-1cc3-40e1-20dd-a49b8f93bdf6-57868d4e" class="vertical-m"><img width="300" height="49" alt="{{ images.-3042e10c.alt | escape }}" src="{{ images.-3042e10c.url }}" loading="lazy" class="footer---logo">
            <div>{{ texts.7a20d721 }}</div>
          </div>
          <div id="w-node-aee2cf24-1cc3-40e1-20dd-a49b8f93bdfa-57868d4e" class="vertical-m">
            <div><strong>{{ texts.7f274abe }}</strong></div>
            <div>
              <div>{{ texts.5c24b9c }}</div>
              <a href="{{ links.295a5d70 }}" class="display-block"></a>
            </div>
          </div>
          <div id="w-node-aee2cf24-1cc3-40e1-20dd-a49b8f93be03-57868d4e" class="font-size-s">
            <div> </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-3-popup">
      <a scroll="enable" data-w-id="12760caa-824c-81f8-0b09-dee0393ed46a" href="{{ links.23 }}" class="modal-bg w-inline-block">
        <div class="screen-reader-only">{{ texts.148b4a45 }}</div>
      </a>
      <div class="modal w-clearfix">
        <a scroll="enable" data-w-id="12760caa-824c-81f8-0b09-dee0393ed46e" href="{{ links.23 }}" class="close-btn-w w-inline-block">
          <div class="close-btn-line is--1st"></div>
          <div class="close-btn-line is--2nd"></div>
          <div class="screen-reader-only">{{ texts.148b4a45 }}</div>
        </a>
        <div class="modal-content-w">
          <div class="w-layout-grid grid">
            <div class="image-left"><img src="{{ images.-43965085.url }}" loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" alt="{{ images.-43965085.alt | escape }}" class="modalimage"></div>
            <div class="code">
              <div class="code-embed w-embed w-script">
                <script async="" src="https://js.stripe.com/v3/buy-button.js">
</script>
                <stripe-buy-button buy-button-id="buy_btn_1SVUwGBZxJbU2KR8mH2l1P0n" publishable-key="pk_live_8tosSyj6NrUl0a7csXx8Ai5g">
                </stripe-buy-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js" type="text/javascript" crossorigin="anonymous"></script>
  <script src="/assets/js/webflow.js" type="text/javascript"></script><!--  Auth0 SPA SDK  -->
  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
  <script>
  // The Auth0 client, initialized in configureClient()
  let auth0 = null;
  /**
   * Starts the authentication flow
   */
  const login = async (url) => {
    try {
      console.log("Logging in", url);
      // Update the targetUrl to point to define the redirect after login
      const loginPath = document.querySelector("meta[name=loginPath]").content;
      const targetUrl = loginPath;
      //
      const options = {
        redirect_uri: window.location.origin,
        appState: { targetUrl }
      };
      await auth0.loginWithRedirect(options);
    } catch (err) {
      console.log("Log in failed", err);
    }
  };
  /**
   * Executes the logout flow
   */
  const logout = () => {
    try {
      console.log("Logging out");
      auth0.logout({
        returnTo: window.location.origin
      });
    } catch (err) {
      console.log("Log out failed", err);
    }
  };
  /**
   * Initializes the Auth0 client
   */
  const configureClient = async () => {
    const domain = document.querySelector("meta[name=domain]").content;
    const clientId = document.querySelector("meta[name=clientId]").content;
    auth0 = await createAuth0Client({
      domain: domain,
      client_id: clientId
    });
  };
  // Will run when page finishes loading
  window.onload = async () => {
    await configureClient();
    updateDom();
    const isAuthenticated = await auth0.isAuthenticated();
    if (isAuthenticated) {
      console.log("> User is authenticated");
      window.history.replaceState({}, document.title, window.location.pathname);
      updateUI();
      return;
    }
    console.log("> User not authenticated");
    const query = window.location.search;
    const shouldParseResult = query.includes("code=") && query.includes("state=");
    if (shouldParseResult) {
      console.log("> Parsing redirect");
      try {
        const result = await auth0.handleRedirectCallback();
        if (result.appState && result.appState.targetUrl) {
          window.location.replace(result.appState.targetUrl);
        }
        console.log("Logged in!");
      } catch (err) {
        console.log("Error parsing redirect:", err);
      }
    }
    updateUI();
  };
  /**
   * Iterates over the elements matching 'selector' and passes them
   * to 'fn'
   * @param {*} selector The CSS selector to find
   * @param {*} fn The function to execute for every element
   */
  const eachElement = (selector, fn) => {
    for (let e of document.querySelectorAll(selector)) {
      fn(e);
    }
  };
  /**
   * Shows and hides UI elements
   */
  const updateUI = async () => {
    try {
      const isAuthenticated = await auth0.isAuthenticated();
      if (isAuthenticated) {
        const user = await auth0.getUser();
        eachElement(".auth---invisible", (e) => e.classList.add("hidden"));
        eachElement(".auth---visible", (e) => {
          e.classList.remove("hidden");
          e.style.visibility = "visible";
        });
      } else {
        if (document.body.classList.contains("auth---visible")) {
          window.location.replace("/");
        }
        eachElement(".auth---invisible", (e) => {
          e.classList.remove("hidden");
          e.style.visibility = "visible";
        });
        eachElement(".auth---visible", (e) => e.classList.add("hidden"));
      }
    } catch (err) {
      console.log("Error updating UI!", err);
      return;
    }
  };
  /**
   * Add click events
   */
  const updateDom = () => {
    var loginBtn = document.querySelector("#login-btn");
    var signUpBtn = document.querySelector("#signup-btn");
    var contentBtn = document.querySelector(".content-button");
    var logoutBtn = document.querySelector("#logout-btn");
    if (loginBtn) {
      loginBtn.addEventListener("click", login);
    }
    if (signUpBtn) {
      signUpBtn.addEventListener("click", login);
    }
    if (contentBtn) {
      contentBtn.addEventListener("click", login);
    }
    if (logoutBtn) {
      logoutBtn.addEventListener("click", logout);
    }
  };
</script>
  <!-- auth0  -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/Draggable.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(e){"use strict";function m(){return i||"undefined"!=typeof window&&(i=window.gsap)}function p(t){return c(t).id}function q(t){return f[p("string"==typeof t?g(t)[0]:t)]}function r(t){var e,r=o;if(.05<=t-s)for(s=t;r;)((e=r.g(r.t,r.p))!==r.v1||.2<t-r.t1)&&(r.v2=r.v1,r.v1=e,r.t2=r.t1,r.t1=t),r=r._next}function t(){(i=m())&&(g=i.utils.toArray,n=i.utils.getUnit,c=i.core.getCache,a=i.ticker,l=1)}function u(t,e,r,i){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=d[r||n(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=a.time,i&&((this._next=i)._prev=this)}var i,l,g,n,o,a,s,c,f={},d={deg:360,rad:2*Math.PI},v=function(){function VelocityTracker(e,r){l||t(),this.target=g(e)[0],(f[p(this.target)]=this)._props={},r&&this.add(r)}VelocityTracker.register=function register(e){i=e,t()};var e=VelocityTracker.prototype;return e.get=function get(t,e){var r,i,n=this._props[t]||console.warn("Not tracking "+t+" velocity.");return r=parseFloat(e?n.v1:n.g(n.t,n.p))-parseFloat(n.v2),(i=n.rCap)&&(r%=i)!==r%(i/2)&&(r=r<0?r+i:r-i),function _round(t){return Math.round(1e4*t)/1e4}(r/((e?n.t1:a.time)-n.t2))},e.getAll=function getAll(){var t,e={},r=this._props;for(t in r)e[t]=this.get(t);return e},e.isTracking=function isTracking(t){return t in this._props},e.add=function add(t,e){t in this._props||(o||(a.add(r),s=a.time),o=this._props[t]=new u(this.target,t,e,o))},e.remove=function remove(t){var e,i,n=this._props[t];n&&(e=n._prev,i=n._next,e&&(e._next=i),i?i._prev=e:o===n&&(a.remove(r),o=0),delete this._props[t])},e.kill=function kill(t){for(var e in this._props)this.remove(e);t||delete f[p(this.target)]},VelocityTracker.track=function track(e,r,i){l||t();for(var n,o,a=[],s=g(e),c=r.split(","),u=(i||"").split(","),f=s.length;f--;){for(n=q(s[f])||new VelocityTracker(s[f]),o=c.length;o--;)n.add(c[o],u[o]||u[0]);a.push(n)}return a},VelocityTracker.untrack=function untrack(t,e){var r=(e||"").split(",");g(t).forEach(function(t){var e=q(t);e&&(r.length?r.forEach(function(t){return e.remove(t)}):e.kill(1))})},VelocityTracker.isTracking=function isTracking(t,e){var r=q(t);return r&&r.isTracking(e)},VelocityTracker.getVelocity=function getVelocity(t,e){var r=q(t);return r&&r.isTracking(e)?r.get(e):console.warn("Not tracking velocity of "+e)},VelocityTracker}();v.getByTarget=q,m()&&i.registerPlugin(v);function J(){return h||"undefined"!=typeof window&&(h=window.gsap)&&h.registerPlugin&&h}function L(t){return"number"==typeof t}function M(t){return"object"==typeof t}function N(t){return"function"==typeof t}function Q(t){return t}function U(t){return Math.round(1e4*t)/1e4}function V(t,e,r){for(var i in e)i in t||i===r||(t[i]=e[i]);return t}function W(t){var e,r,i={};for(e in t)i[e]=M(r=t[e])&&!w(r)?W(r):r;return i}function X(t,e,r,i,n){var o,a,s,c,u=e.length,f=0,l=B;if(M(t)){for(;u--;){for(s in o=e[u],a=0,t)a+=(c=o[s]-t[s])*c;a<l&&(f=u,l=a)}if((n||B)<B&&n<Math.sqrt(l))return t}else for(;u--;)(a=(o=e[u])-t)<0&&(a=-a),a<l&&i<=o&&o<=r&&(f=u,l=a);return e[f]}function Y(t,e,r,i,n,o,a){if("auto"===t.end)return t;var s,c,u=t.end;if(r=isNaN(r)?B:r,i=isNaN(i)?-B:i,M(e)){if(s=e.calculated?e:(N(u)?u(e,a):X(e,u,r,i,o))||e,!e.calculated){for(c in s)e[c]=s[c];e.calculated=!0}s=s[n]}else s=N(u)?u(e,a):w(u)?X(e,u,r,i,o):parseFloat(u);return r<s?s=r:s<i&&(s=i),{max:s,min:s,unitFactor:t.unitFactor}}function Z(t,e,r){return isNaN(t[e])?r:+t[e]}function $(t,e){return.05*e*t/T}function _(t,e,r){return Math.abs((e-t)*T/r/.05)}function ba(t,e,r,i){if(e.linkedProps){var n,o,a,s,c,u,f=e.linkedProps.split(","),l={};for(n=0;n<f.length;n++)(a=e[o=f[n]])&&(s=L(a.velocity)?a.velocity:(c=c||j(t))&&c.isTracking(o)?c.get(o):0,u=Math.abs(s/Z(a,"resistance",i)),l[o]=parseFloat(r(t,o))+$(s,u));return l}}function da(){(h=J())&&(y=h.parseEase,F=h.utils.toArray,b=h.utils.getUnit,O=h.core.getCache,E=h.utils.clamp,k=y("power3"),T=k(.05),A=h.core.PropTween,h.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),P=h.config(),h.registerPlugin(v),x=1)}var h,x,y,F,k,P,b,A,O,T,E,C,j=v.getByTarget,w=Array.isArray,B=1e10,I={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},R={version:"3.9.1",name:"inertia",register:function register(t){h=t,da()},init:function init(t,e,r,i,n){x||da();var o=j(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.target=t,this.tween=r,C=e;var a,s,c,u,f,l,p,g,d,v=t._gsap,h=v.get,m=e.duration,y=M(m),k=e.preventOvershoot||y&&0===m.overshoot,T=Z(e,"resistance",P.resistance),w=L(m)?m:function _calculateTweenDuration(t,e,r,i,n,o){if(void 0===r&&(r=10),void 0===i&&(i=.2),void 0===n&&(n=1),void 0===o&&(o=0),function _isString(t){return"string"==typeof t}(t)&&(t=F(t)[0]),!t)return 0;var a,s,c,u,f,l,p,g,d,v,h=0,m=B,y=e.inertia||e,k=O(t).get,T=Z(y,"resistance",P.resistance);for(a in v=ba(t,y,k,T),y)I[a]||(s=y[a],M(s)||((g=g||j(t))&&g.isTracking(a)?s=L(s)?{velocity:s}:{velocity:g.get(a)}:(u=+s||0,c=Math.abs(u/T))),M(s)&&(u=L(s.velocity)?s.velocity:(g=g||j(t))&&g.isTracking(a)?g.get(a):0,c=E(i,r,Math.abs(u/Z(s,"resistance",T))),l=(f=parseFloat(k(t,a))||0)+$(u,c),"end"in s&&(s=Y(s,v&&a in v?v:l,s.max,s.min,a,y.radius,u),o&&(C===e&&(C=y=W(e)),y[a]=V(s,y[a],"end"))),"max"in s&&l>+s.max+1e-10?(d=s.unitFactor||P.unitFactors[a]||1,(p=f>s.max&&s.min!==s.max||-15<u*d&&u*d<45?i+.1*(r-i):_(f,s.max,u))+n<m&&(m=p+n)):"min"in s&&l<s.min-1e-10&&(d=s.unitFactor||P.unitFactors[a]||1,(p=f<s.min&&s.min!==s.max||-45<u*d&&u*d<15?i+.1*(r-i):_(f,s.min,u))+n<m&&(m=p+n)),h<p&&(h=p)),h<c&&(h=c));return m<h&&(h=m),r<h?r:h<i?i:h}(t,e,y&&m.max||10,y&&m.min||.2,y&&"overshoot"in m?+m.overshoot:k?0:1,!0);for(a in e=C,C=0,d=ba(t,e,h,T),e)I[a]||(s=e[a],N(s)&&(s=s(i,t,n)),L(s)?f=s:M(s)&&!isNaN(s.velocity)?f=+s.velocity:o&&o.isTracking(a)?f=o.get(a):console.warn("ERROR: No velocity was defined for "+t+" property: "+a),l=$(f,w),g=0,c=h(t,a),u=b(c),c=parseFloat(c),M(s)&&(p=c+l,"end"in s&&(s=Y(s,d&&a in d?d:p,s.max,s.min,a,e.radius,f)),"max"in s&&+s.max<p?k||s.preventOvershoot?l=s.max-c:g=s.max-c-l:"min"in s&&+s.min>p&&(k||s.preventOvershoot?l=s.min-c:g=s.min-c-l)),this._props.push(a),this._pt=new A(this._pt,t,a,c,0,Q,0,v.set(t,a,this)),this._pt.u=u||0,this._pt.c1=l,this._pt.c2=g);return r.duration(w),1},render:function render(t,e){var r=e._pt;for(t=k(e.tween._time/e.tween._dur);r;)r.set(r.t,r.p,U(r.s+r.c1*t+r.c2*t*t)+r.u,r.d,t),r=r._next}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(t){return R[t]=v[t]}),J()&&h.registerPlugin(R),e.InertiaPlugin=R,e.VelocityTracker=v,e.default=R;if (typeof(window)==="undefined"||window!==e){Object.defineProperty(e,"__esModule",{value:!0})} else {delete e.default}});
</script>
  <script type="module">
  /**
   * Story Form with Tiptap Editor & Uploadcare Integration
   * Clean, modular implementation
   */
  import { Editor } from '@tiptap/core';
  import StarterKit from '@tiptap/starter-kit';
  import TiptapImage from '@tiptap/extension-image';

  // ============================================================================
  // CONFIGURATION
  // ============================================================================
  const CONFIG = {
    form: '#wf-form-story',
    // Featured Image uploader
    uploader: 'uc-file-uploader-regular[ctx-name="story"]',
    ctxProvider: 'uc-upload-ctx-provider[ctx-name="story"]',
    formInput: 'uc-form-input[ctx-name="story"]',
    uploadButton: 'button[ctx-name="story"][ucuploadbtn="true"]',
    hiddenInput: '#story_hero',
    // Author Image uploader
    authorUploader: 'uc-file-uploader-regular[ctx-name="author"]',
    authorCtxProvider: 'uc-upload-ctx-provider[ctx-name="author"]',
    authorFormInput: 'uc-form-input[ctx-name="author"]',
    authorUploadButton: 'button[ctx-name="author"][ucuploadbtn="true"]',
    authorHiddenInput: '#author_image',
    // Document uploader
    documentUploader: 'uc-file-uploader-regular[ctx-name="document"]',
    documentCtxProvider: 'uc-upload-ctx-provider[ctx-name="document"]',
    documentFormInput: 'uc-form-input[ctx-name="document"]',
    documentUploadButton: 'button[ctx-name="document"][ucuploadbtn="true"]',
    documentHiddenInput: '#document_url',
    // Editor
    editorContainer: '#story-content-editor',
    toolbar: '#tiptap-toolbar',
    endpoint: 'https://xerb-qpd6-hd8t.n7.xano.io/api:pIN2vLYu/stories',
    fields: ['story_name', 'story_email', 'story_input', 'story_tags', 'story_checkbox']
  };

  // ============================================================================
  // UPLOADCARE MANAGER
  // ============================================================================
  class UploadcareManager {
    constructor(config = {}) {
      this.files = [];
      this.uploader = null;
      this.ctxProvider = null;
      this.config = config;
      this.name = config.name || 'default';
    }

    async init() {
      // Wait for custom elements to be defined
      if (!customElements.get('uc-file-uploader-regular')) {
        await customElements.whenDefined('uc-file-uploader-regular');
      }
      await this.delay(100);

      this.uploader = document.querySelector(this.config.uploader);
      this.ctxProvider = document.querySelector(this.config.ctxProvider);
      const formInput = document.querySelector(this.config.formInput);
      const hiddenInput = document.querySelector(this.config.hiddenInput);

      if (!this.uploader) {
        console.warn(`Uploadcare uploader not found for ${this.name}`);
        return;
      }

      // Watch form input for value changes
      if (formInput) {
        new MutationObserver(mutations => {
          mutations.forEach(m => {
            if (m.attributeName === 'value') {
              this.parseAndStore(formInput.getAttribute('value'), hiddenInput);
            }
          });
        }).observe(formInput, { attributes: true, attributeFilter: ['value'] });
      }

      // Listen to uploader events
      this.uploader.addEventListener('change', e => this.handleChange(e, hiddenInput));
      this.uploader.addEventListener('file-upload-success', e => this.handleSuccess(e, hiddenInput));

      // Wire up upload button
      const uploadBtn = document.querySelector(this.config.uploadButton);
      if (uploadBtn) {
        uploadBtn.addEventListener('click', e => {
          e.preventDefault();
          this.openDialog();
        });
      }

      console.log(`${this.name} uploader initialized`);
    }

    parseAndStore(value, hiddenInput) {
      try {
        const data = JSON.parse(value);
        if (Array.isArray(data) && data.length > 0) {
          this.files = data;
          if (hiddenInput) hiddenInput.value = data[0].cdnUrl || '';
        }
      } catch (e) { /* ignore parse errors */ }
    }

    handleChange(e, hiddenInput) {
      if (e.detail?.allEntries?.length > 0) {
        this.files = e.detail.allEntries;
        if (hiddenInput) hiddenInput.value = this.files[0].cdnUrl || '';
      }
    }

    handleSuccess(e, hiddenInput) {
      if (e.detail?.data) {
        this.files = [e.detail.data];
        if (hiddenInput) hiddenInput.value = this.files[0].cdnUrl || this.files[0].uuid || '';
      }
    }

    openDialog() {
      if (this.uploader?.initFlow) {
        this.uploader.initFlow();
      } else if (this.ctxProvider?.getAPI?.()?.initFlow) {
        this.ctxProvider.getAPI().initFlow();
      }
    }

    getData() {
      if (this.files.length === 0) return null;
      const file = this.files[0];
      return {
        uuid: file.uuid || '',
        url: file.cdnUrl || file.url || '',
        name: file.name || file.filename || '',
        size: file.size || 0,
        mimeType: file.mimeType || file.contentType || '',
        metadata: file.imageInfo ? {
          width: file.imageInfo.width,
          height: file.imageInfo.height,
          format: file.imageInfo.format
        } : null
      };
    }

    reset() {
      this.files = [];
    }

    delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    // Upload image directly to Uploadcare API (for Tiptap editor)
    async uploadFile(file) {
      const publicKey = window.ENV_CONFIG?.UPLOADCARE_PUBLIC_KEY;
      if (!publicKey) throw new Error('Uploadcare public key not configured');

      const formData = new FormData();
      formData.append('UPLOADCARE_PUB_KEY', publicKey);
      formData.append('UPLOADCARE_STORE', '1');
      formData.append('file', file);

      const response = await fetch('https://upload.uploadcare.com/base/', {
        method: 'POST',
        body: formData
      });

      const data = await response.json();
      if (data.file) {
        return `https://ucarecdn.com/${data.file}/`;
      }
      throw new Error(data.error || 'Upload failed');
    }
  }

  // ============================================================================
  // TIPTAP EDITOR MANAGER
  // ============================================================================
  class TiptapManager {
    constructor(uploadcare) {
      this.editor = null;
      this.uploadcare = uploadcare;
    }

    init() {
      const container = document.getElementById(CONFIG.editorContainer.slice(1));
      const toolbar = document.getElementById(CONFIG.toolbar.slice(1));

      if (!container) {
        console.error('Editor container not found');
        return;
      }

      this.editor = new Editor({
        element: container,
        extensions: [
          StarterKit.configure({ heading: { levels: [1, 2, 3, 4, 5, 6] } }),
          TiptapImage.configure({
            inline: false,
            allowBase64: true,
            HTMLAttributes: { class: 'editor-image', loading: 'lazy' }
          })
        ],
        content: '<p>Write your story here...</p>',
        editorProps: {
          attributes: { class: 'ProseMirror', spellcheck: 'true' }
        }
      });

      if (toolbar) this.createToolbar(toolbar);
    }

    createToolbar(toolbar) {
      const buttons = [
        { label: 'P', cmd: () => this.editor.chain().focus().setParagraph().run(), active: () => this.editor.isActive('paragraph') },
        { label: 'H1', cmd: () => this.editor.chain().focus().toggleHeading({ level: 1 }).run(), active: () => this.editor.isActive('heading', { level: 1 }) },
        { label: 'H2', cmd: () => this.editor.chain().focus().toggleHeading({ level: 2 }).run(), active: () => this.editor.isActive('heading', { level: 2 }) },
        { label: 'H3', cmd: () => this.editor.chain().focus().toggleHeading({ level: 3 }).run(), active: () => this.editor.isActive('heading', { level: 3 }) },
        { label: 'H4', cmd: () => this.editor.chain().focus().toggleHeading({ level: 4 }).run(), active: () => this.editor.isActive('heading', { level: 4 }) },
        { label: 'H5', cmd: () => this.editor.chain().focus().toggleHeading({ level: 5 }).run(), active: () => this.editor.isActive('heading', { level: 5 }) },
        { label: 'H6', cmd: () => this.editor.chain().focus().toggleHeading({ level: 6 }).run(), active: () => this.editor.isActive('heading', { level: 6 }) },
        { label: 'B', cmd: () => this.editor.chain().focus().toggleBold().run(), active: () => this.editor.isActive('bold') },
        { label: 'I', cmd: () => this.editor.chain().focus().toggleItalic().run(), active: () => this.editor.isActive('italic') },
        { label: 'S', cmd: () => this.editor.chain().focus().toggleStrike().run(), active: () => this.editor.isActive('strike') },
        { label: 'â€¢ List', cmd: () => this.editor.chain().focus().toggleBulletList().run(), active: () => this.editor.isActive('bulletList') },
        { label: '1. List', cmd: () => this.editor.chain().focus().toggleOrderedList().run(), active: () => this.editor.isActive('orderedList') },
        { label: '" Quote', cmd: () => this.editor.chain().focus().toggleBlockquote().run(), active: () => this.editor.isActive('blockquote') },
        { label: 'Code', cmd: () => this.editor.chain().focus().toggleCodeBlock().run(), active: () => this.editor.isActive('codeBlock') },
        { label: '+ Image', cmd: () => this.addImage(), active: () => false }
      ];

      const updateState = () => {
        toolbar.querySelectorAll('button').forEach((btn, i) => {
          btn.classList.toggle('is-active', buttons[i].active());
        });
      };

      buttons.forEach(({ label, cmd }) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = label;
        btn.addEventListener('click', e => { e.preventDefault(); cmd(); updateState(); });
        toolbar.appendChild(btn);
      });

      this.editor.on('update', updateState);
      this.editor.on('selectionUpdate', updateState);
    }

    async addImage() {
      const choice = confirm('OK = Upload from computer\nCancel = Enter URL');

      if (choice) {
        await this.uploadImage();
      } else {
        const url = prompt('Enter image URL:');
        if (url) this.insertImage(url);
      }
    }

    async uploadImage() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';

      input.onchange = async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const toast = this.showToast('Uploading...');
        try {
          const url = await this.uploadcare.uploadFile(file);
          await this.verifyAndInsertImage(url, file.name);
        } catch (err) {
          alert('Upload failed: ' + err.message);
        } finally {
          toast.remove();
        }
      };

      input.click();
    }

    verifyAndInsertImage(url, name) {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => {
          this.insertImage(url, name);
          resolve();
        };
        img.onerror = () => reject(new Error('Image failed to load from CDN'));
        img.src = url;
      });
    }

    insertImage(url, alt = '') {
      this.editor.chain().focus().setImage({ src: url, alt, title: alt }).run();
    }

    showToast(message) {
      const toast = document.createElement('div');
      toast.textContent = message;
      toast.style.cssText = 'position:fixed;top:20px;right:20px;background:#000;color:#fff;padding:10px 20px;border-radius:4px;z-index:9999';
      document.body.appendChild(toast);
      return toast;
    }

    getHTML() {
      const html = this.editor?.getHTML() || '';
      return (html && html !== '<p></p>') ? html : '';
    }

    reset() {
      this.editor?.commands.setContent('<p>Write your story here...</p>');
    }
  }

  // ============================================================================
  // FORM MANAGER
  // ============================================================================
  class FormManager {
    constructor(featuredImageUploader, authorImageUploader, documentUploader, tiptap) {
      this.featuredImageUploader = featuredImageUploader;
      this.authorImageUploader = authorImageUploader;
      this.documentUploader = documentUploader;
      this.tiptap = tiptap;
      this.form = null;
    }

    init() {
      this.form = document.querySelector(CONFIG.form);
      if (!this.form) {
        console.error('Form not found');
        return;
      }

      this.form.addEventListener('submit', e => this.handleSubmit(e));
    }

    async checkForDuplicate(storyName, storyEmail) {
      try {
        const params = new URLSearchParams({
          story_name: storyName,
          story_email: storyEmail
        });
        const response = await fetch(`${CONFIG.endpoint}?${params}`, {
          method: 'GET',
          headers: { 'Content-Type': 'application/json' }
        });

        if (response.ok) {
          const result = await response.json();
          // Check if we got a matching story back
          if (result.data && result.data.length > 0) {
            return result.data[0]; // Return the existing story
          }
          if (result.id) {
            return result; // Single story returned
          }
        }
        return null;
      } catch (err) {
        console.warn('Duplicate check failed:', err);
        return null;
      }
    }

    async handleSubmit(e) {
      e.preventDefault();
      e.stopPropagation();

      const submitBtn = this.form.querySelector('[type="submit"]');
      const originalText = submitBtn.value;
      submitBtn.value = 'Checking...';
      submitBtn.disabled = true;

      try {
        const formData = this.collectFormData();

        // Check for existing story with same name + email
        const existingStory = await this.checkForDuplicate(formData.story_name, formData.story_email);

        let endpoint = CONFIG.endpoint;
        let method = 'POST';

        if (existingStory) {
          const updateConfirmed = confirm(
            `A story titled "${existingStory.story_name}" by ${existingStory.story_email} already exists.\n\n` +
            `Click OK to update the existing story, or Cancel to submit as a new story.`
          );

          if (updateConfirmed) {
            // Update existing story
            endpoint = `${CONFIG.endpoint}/${existingStory.id}`;
            method = 'PUT';
            formData.id = existingStory.id;
          }
        }

        submitBtn.value = 'Submitting...';

        const response = await fetch(endpoint, {
          method: method,
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (response.ok) {
          const action = method === 'PUT' ? 'updated' : 'submitted';
          this.showMessage('success', `Story ${action} successfully. It will appear on the website shortly.`);
          this.resetForm();
        } else {
          throw new Error(result.message || result.error || 'Submission failed');
        }
      } catch (err) {
        console.error('Submission error:', err);
        this.showMessage('error', err.message);
      } finally {
        submitBtn.value = originalText;
        submitBtn.disabled = false;
      }
    }

    collectFormData() {
      const data = {};

      // Collect standard fields
      CONFIG.fields.forEach(field => {
        const el = document.getElementById(field);
        if (el) {
          data[field] = el.type === 'checkbox' ? (el.checked ? 'true' : 'false') : el.value;
        }
      });

      // Add Featured Image (Uploadcare) data
      const featuredData = this.featuredImageUploader.getData();
      data.uploadcare_uuid = featuredData?.uuid || '';
      data.uploadcare_url = featuredData?.url || '';
      data.uploadcare_file_name = featuredData?.name || '';
      data.uploadcare_file_size = featuredData?.size || 0;
      data.uploadcare_mime_type = featuredData?.mimeType || '';
      data.uploadcare_metadata = featuredData?.metadata || null;

      // Add Author Image data
      const authorData = this.authorImageUploader.getData();
      data.author_image_uuid = authorData?.uuid || '';
      data.author_image_url = authorData?.url || '';
      data.author_image_file_name = authorData?.name || '';
      data.author_image_file_size = authorData?.size || 0;
      data.author_image_mime_type = authorData?.mimeType || '';

      // Add Document data
      const documentData = this.documentUploader.getData();
      data.document_url = documentData?.url || '';
      data.document_uuid = documentData?.uuid || '';
      data.document_file_name = documentData?.name || '';
      data.document_file_size = documentData?.size || 0;
      data.document_mime_type = documentData?.mimeType || '';

      // Add Tiptap content
      data.story_content_html = this.tiptap.getHTML();

      // Add source to track origin (form vs webflow)
      data.source = 'form';

      return data;
    }

    resetForm() {
      this.form.reset();
      this.featuredImageUploader.reset();
      this.authorImageUploader.reset();
      this.documentUploader.reset();
      this.tiptap.reset();

      const hiddenInput = document.querySelector(CONFIG.hiddenInput);
      if (hiddenInput) hiddenInput.value = '';

      const authorHiddenInput = document.querySelector(CONFIG.authorHiddenInput);
      if (authorHiddenInput) authorHiddenInput.value = '';

      const documentHiddenInput = document.querySelector(CONFIG.documentHiddenInput);
      if (documentHiddenInput) documentHiddenInput.value = '';

      // Show Webflow success message
      this.form.style.display = 'none';
      this.form.parentElement.querySelector('.w-form-done')?.style.setProperty('display', 'block');
    }

    showMessage(type, text) {
      const div = document.createElement('div');
      div.textContent = text;
      div.style.cssText = `
        position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
        padding: 12px 24px; border-radius: 6px; z-index: 9999; font-size: 1rem;
        background: ${type === 'error' ? '#ef4444' : '#333'}; color: white;
        animation: slideIn 0.3s ease-out;
      `;
      document.body.appendChild(div);
      setTimeout(() => div.remove(), 4000);

      if (type === 'error') {
        this.form.parentElement.querySelector('.w-form-fail')?.style.setProperty('display', 'block');
      }
    }
  }

  // ============================================================================
  // INITIALIZE
  // ============================================================================
  async function init() {
    // Create Featured Image uploader
    const featuredImageUploader = new UploadcareManager({
      name: 'Featured Image',
      uploader: CONFIG.uploader,
      ctxProvider: CONFIG.ctxProvider,
      formInput: CONFIG.formInput,
      uploadButton: CONFIG.uploadButton,
      hiddenInput: CONFIG.hiddenInput
    });

    // Create Author Image uploader
    const authorImageUploader = new UploadcareManager({
      name: 'Author Image',
      uploader: CONFIG.authorUploader,
      ctxProvider: CONFIG.authorCtxProvider,
      formInput: CONFIG.authorFormInput,
      uploadButton: CONFIG.authorUploadButton,
      hiddenInput: CONFIG.authorHiddenInput
    });

    // Create Document uploader
    const documentUploader = new UploadcareManager({
      name: 'Document',
      uploader: CONFIG.documentUploader,
      ctxProvider: CONFIG.documentCtxProvider,
      formInput: CONFIG.documentFormInput,
      uploadButton: CONFIG.documentUploadButton,
      hiddenInput: CONFIG.documentHiddenInput
    });

    const tiptap = new TiptapManager(featuredImageUploader);
    const form = new FormManager(featuredImageUploader, authorImageUploader, documentUploader, tiptap);

    await featuredImageUploader.init();
    await authorImageUploader.init();
    await documentUploader.init();
    tiptap.init();
    form.init();

    console.log('Story form initialized with image and document uploaders');
  }

  // Run on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
  </script>
  <script>
var Webflow = Webflow || [];
Webflow.push(function() {
  // unbind webflow form handling (keep this if you only want to affect specific forms)
  $(document).off('submit');
  /* Any form on the page (except those with custom handlers) */
  $('form:not([data-ajax="true"])').submit(function(e) {
    e.preventDefault();
  	const $form = $(this); // The submitted form
    const $submit = $('[type=submit]', $form); // Submit button of form
    const buttonText = $submit.val(); // Original button text
    const buttonWaitingText = $submit.attr('data-wait'); // Waiting button text value
    const formMethod = $form.attr('method'); // Form method (GET/POST)
    const formAction = $form.attr('action'); // Form action (your Xano endpoint URL)
    const formRedirect = $form.attr('data-redirect'); // Form redirect location
    // if we're editing
    // const xanoID = document.getElementById('id').value // getting the ID of the record to edit
    // let requestURL = formAction.concat(xanoID + "?")
    const formData = $form.serialize(); // Form data
    // console.log(formData) // log request URL to console
    // Set waiting text
    if (buttonWaitingText) {
      $submit.val(buttonWaitingText);
    }
    $.ajax(formAction, {
    	data: formData,
      method: formMethod
    })
    .done((res) => {
      // If form redirect setting set, then use this and prevent any other actions
      if (formRedirect) { window.location = formRedirect; return; }
    	$form
      	.hide() // optional hiding of form
    		.siblings('.w-form-done').show() // Show success
      	.siblings('.w-form-fail').hide(); // Hide failure
    })
    .fail((res) => {
      $form
      	.siblings('.w-form-done').hide() // Hide success
    	  .siblings('.w-form-fail').show(); // show failure
    })
    .always(() => {
      // Reset text
      $submit.val(buttonText);
    });
  });
});
</script>
  <script src="https://cdn.prod.website-files.com/691b528b32c64580050add6b%2F685146e1d8a68f749232b664%2F6930ff73f01254005f8fb3c9%2Femptyfieldsremoval-1.1.0.js" type="text/javascript"></script>
  <script src="https://cdn.prod.website-files.com/691b528b32c64580050add6b%2F685146e1d8a68f749232b664%2F691f77e3d2952ec51dcfbb55%2Fmetadatahandler-0.0.5.js" type="text/javascript"></script>
  <script src="https://cdn.prod.website-files.com/691b528b32c64580050add6b%2F685146e1d8a68f749232b664%2F691f77e4d2952ec51dcfbb63%2Fenablevisiblebuttons-0.0.7.js" type="text/javascript"></script>
  <script src="https://cdn.prod.website-files.com/691b528b32c64580050add6b%2F685146e1d8a68f749232b664%2F691f77e494fbd4751f3e48dd%2Fenableuploadstateview-0.0.3.js" type="text/javascript"></script>
